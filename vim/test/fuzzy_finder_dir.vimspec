Describe Fuzzy Finderは
    Before each
        cal feedkeys("\<CR>\<CR>", "tx!")
        %bwipeout!
        " set messagesopt=wait:1,history:500
        let s:test_timers = []
        cal add(s:test_timers, timer_start(10000, { 
                    \ -> feedkeys("\<ESC>","t")
                    \ }, #{repeat: 1}))
        cal add(s:test_timers, timer_start(10000, { 
                    \ -> feedkeys("\<C-c>","t")
                    \ }, #{repeat: 1}))
    End
    After each
        for l:timer_id in s:test_timers
            cal timer_stop(l:timer_id)
        endfor
    End
    It <Leader><Leader> の後 fuzzyfindertest を入力すると spec/stubs/fuzzyfinder_test.txt を見つけて開く

        cal add(s:test_timers, timer_start(500, { 
                    \ -> feedkeys("fuzzyfindertest","t")
                    \ }, #{repeat: 1}))
        cal add(s:test_timers, timer_start(1000, { 
                    \ -> feedkeys("\<CR>","t")
                    \ }, #{repeat: 1}))
        cal add(s:test_timers, timer_start(1500, { 
                    \ -> feedkeys("\<ESC>","t")
                    \ }, #{repeat: 1}))

        cal feedkeys("\<Space>\<Space>", "tx!")

        let l:actual_filename = expand("%")
        Assert Equals(l:actual_filename, "spec/stubs/fuzzyfinder_test.txt")

        let l:actual_buffer = getline(0, "$")
        Assert Equals(l:actual_buffer, "This is fuzzyfinder test!")
    End
End
